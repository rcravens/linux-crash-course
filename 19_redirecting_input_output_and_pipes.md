# Chapter 19: Redirecting Input/Output and Pipes

## 19.1 Introduction to Redirection and Pipes
- **Purpose**
  - Redirection and pipes are fundamental concepts in Unix-like operating systems that allow you to control the flow of data between commands and files.
  - **Redirection**: Directs input or output from/to files or devices.
  - **Pipes**: Allow the output of one command to be used as the input to another command.

## 19.2 Redirecting Output
- **Standard Output Redirection (`>` and `>>`)**
  - **Overwrite File with `>`**:
    - **Description**: Redirects output to a file, overwriting the file if it already exists.
    - **Example**:
      ```bash
      echo "Hello, World!" > output.txt
      ```
    - **Explanation**: Writes "Hello, World!" to `output.txt`, creating the file if it doesn't exist or overwriting it if it does.

  - **Append Output with `>>`**:
    - **Description**: Redirects output to a file, appending to the file if it already exists.
    - **Example**:
      ```bash
      echo "Hello again!" >> output.txt
      ```
    - **Explanation**: Appends "Hello again!" to the end of `output.txt`.

- **Redirecting Error Output (`2>`, `2>>`)**
  - **Redirect Standard Error to File**:
    - **Description**: Redirects error messages to a file.
    - **Example**:
      ```bash
      ls non_existing_file 2> error.log
      ```
    - **Explanation**: Redirects the error message generated by the `ls` command to `error.log`.

  - **Append Error Output to File**:
    - **Example**:
      ```bash
      ls another_non_existing_file 2>> error.log
      ```

- **Redirecting Both Output and Error (`&>`, `&>>`)**
  - **Redirect Both to the Same File**:
    - **Example**:
      ```bash
      command &> combined.log
      ```
    - **Explanation**: Redirects both standard output and standard error to `combined.log`.

  - **Append Both Output and Error**:
    - **Example**:
      ```bash
      command &>> combined.log
      ```

## 19.3 Redirecting Input
- **Standard Input Redirection (`<`)**
  - **Description**: Directs input from a file instead of the keyboard.
  - **Example**:
    ```bash
    sort < input.txt
    ```
  - **Explanation**: Takes the contents of `input.txt` as input to the `sort` command.

## 19.4 Using Pipes
- **Basic Pipe (`|`)**
  - **Description**: Connects the output of one command directly to the input of another command.
  - **Example**:
    ```bash
    ls -l | grep "txt"
    ```
  - **Explanation**: Lists files in long format and then pipes the output to `grep` to filter lines containing "txt".

- **Multiple Pipes**
  - **Description**: Use multiple pipes to chain several commands together.
  - **Example**:
    ```bash
    cat file.txt | grep "search_term" | sort | uniq
    ```
  - **Explanation**: Reads `file.txt`, searches for "search_term", sorts the results, and removes duplicates.

## 19.5 Combining Redirection and Pipes
- **Redirecting Output of a Piped Command**
  - **Description**: Redirect the output of a piped sequence to a file.
  - **Example**:
    ```bash
    cat file.txt | grep "search_term" | sort > sorted_results.txt
    ```
  - **Explanation**: Filters, sorts, and then writes the output to `sorted_results.txt`.

- **Redirecting Error Output of a Piped Command**
  - **Description**: Redirect errors that occur in a piped sequence to a file.
  - **Example**:
    ```bash
    cat file.txt | grep "search_term" 2> error.log
    ```

## 19.6 Practical Examples
- **Example 1: Finding Large Files**
  - **Command**:
    ```bash
    find /home -type f -size +100M 2> find_errors.log | tee large_files.txt
    ```
  - **Explanation**: Finds files larger than 100MB in `/home`, logs errors to `find_errors.log`, and writes the results to `large_files.txt` while also displaying them on the terminal.

- **Example 2: Counting Word Occurrences**
  - **Command**:
    ```bash
    cat document.txt | tr ' ' '\n' | sort | uniq -c | sort -nr
    ```
  - **Explanation**: Converts spaces to newlines, sorts, counts unique occurrences, and sorts numerically in reverse order.

## 19.7 Conclusion
Understanding and effectively using redirection and pipes allows you to manage and manipulate data in powerful ways on the command line. These techniques are essential for efficient system administration, data processing, and scripting.

- **Key Takeaways**:
  - **Redirection**: Manage output and error streams by redirecting to or from files.
  - **Pipes**: Chain commands together to perform complex operations.
  - **Combination**: Use redirection and pipes together to handle various data processing tasks.

Mastering these concepts will enhance your command-line skills and improve your productivity in managing and automating tasks on Linux systems.
